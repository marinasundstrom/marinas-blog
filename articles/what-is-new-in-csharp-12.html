<!DOCTYPE html><html lang="en"><head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>

  <title>Marina Sundström</title>

  <meta name="description" content="Personal blog of Marina Sundström."/>
  <meta name="keywords" content="Blog, Personal, Software Development"/>

  <base href="/"/>
  <link href="css/bootstrap/bootstrap.min.css" rel="stylesheet"/>
  <link href="css/app.css" rel="stylesheet"/>
  <link href="PersonalSite.styles.css" rel="stylesheet"/>

  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96"/>
  <link rel="icon" type="image/svg+xml" href="/favicon.svg"/>
  <link rel="shortcut icon" href="/favicon.ico"/>
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/>
  <meta name="apple-mobile-web-app-title" content="Marina Sundström"/>
  <link rel="manifest" href="/site.webmanifest"/>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/styles/vs.min.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/highlight.min.js"></script>
  <script type="text/javascript" src="https://unpkg.com/highlightjs-cshtml-razor/dist/cshtml-razor.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.7.0/highlightjs-line-numbers.min.js"></script>

  <link rel="stylesheet" href="css/bootstrap/color-modes.css"/>

  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""/>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&amp;display=swap" rel="stylesheet"/>

  <script src="/js/scripts.js"></script>

  <style>
    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }
  </style>


<!-- %%-PRERENDERING-HEADOUTLET-BEGIN-%% -->
<title>What is new in C# 12 - Marina Sundström</title>
<!-- %%-PRERENDERING-HEADOUTLET-END-%% -->
</head>

<body class="bg-body-tertiary">
  <div id="app" class="h-100">
    <svg class="loading-progress">
      <circle r="40%" cx="50%" cy="50%"></circle>
      <circle r="40%" cx="50%" cy="50%"></circle>
    </svg>
    <div class="loading-progress-text"></div>
  
<!-- %%-PRERENDERING-BEGIN-%% -->
<div style="opacity: 0; position: fixed; z-index: -1; top: 0; left: 0; bottom: 0; right: 0;">
    <header class="navbar navbar-expand-lg fixed-top navbar-dark bg-brand" b-kujckncdpz><nav class="container px-4 px-md-3 flex-wrap flex-md-nowrap" aria-label="Main navigation" b-kujckncdpz><a href="" class="navbar-brand mr-auto mr-lg-0"><img src="/images/profile.jpeg" alt="Profile Image" class="rounded-circle profile" style="margin-right: 10px; height: 32px; font-weight: 700" b-kujckncdpz>
            Marina Sundström
        </a>
        <button class="navbar-toggler p-0 border-0" type="button" id="navbarSideCollapse" aria-label="Toggle navigation" b-kujckncdpz><span class="navbar-toggler-icon" b-kujckncdpz></span></button>

        <div class="navbar-collapse offcanvas-collapse" id="navbarsExampleDefault" b-kujckncdpz><ul class="navbar-nav me-auto mb-2 mb-lg-0" b-kujckncdpz><li class="nav-item active" b-kujckncdpz><a href="" class="nav-link">Home</a></li>
                <li class="nav-item active" b-kujckncdpz><a href="/#who-am-i" class="nav-link">About me</a></li>
                <li class="nav-item" b-kujckncdpz><a href="articles" class="nav-link active" aria-current="page">Articles</a></li>
                <li class="nav-item" b-kujckncdpz><a href="resume" class="nav-link">Resumé</a></li>
                <li class="nav-item" b-kujckncdpz><a href="portfolio" class="nav-link">Portfolio</a></li></ul>
            <hr class="d-md-none text-white-50" b-kujckncdpz>
            <ul class="navbar-nav flex-row flex-wrap ms-md-auto" b-kujckncdpz><svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><symbol id="check2" viewBox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol>
      <symbol id="circle-half" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol>
      <symbol id="moon-stars-fill" viewBox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path>
        <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol>
      <symbol id="sun-fill" viewBox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg>

<li class="nav-item dropdown bd-mode-toggle theme-selector me-4 me-md-0"><a class="nav-link btn-bd-primary py-2 dropdown-toggle d-flex align-items-center opacity-50" id="bd-theme" aria-expanded="false" data-bs-toggle="dropdown" aria-label="Toggle theme (auto)"><svg class="bi my-special theme-icon-active" width="1em" height="1em"><use href="#circle-half"></use></svg>
      <span class="visually-hidden" id="bd-theme-text">Toggle theme</span></a>
  <ul class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="bd-theme-text"><li><button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false"><svg class="bi me-2 opacity-50 theme-icon" width="1em" height="1em"><use href="#sun-fill"></use></svg>
          Light
          <svg class="bi ms-auto d-none" width="1em" height="1em"><use href="#check2"></use></svg></button></li>
      <li><button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false"><svg class="bi me-2 opacity-50 theme-icon" width="1em" height="1em"><use href="#moon-stars-fill"></use></svg>
          Dark
          <svg class="bi ms-auto d-none" width="1em" height="1em"><use href="#check2"></use></svg></button></li>
      <li><button type="button" class="dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true"><svg class="bi me-2 opacity-50 theme-icon" width="1em" height="1em"><use href="#circle-half"></use></svg>
          Auto
          <svg class="bi ms-auto d-none" width="1em" height="1em"><use href="#check2"></use></svg></button></li></ul></li>
                <li class="nav-item list-inline-item me-4 me-md-0" b-kujckncdpz><a class="nav-link menu-link me-0 py-2 text-decoration-none text-uppercase" href="https://github.com/marinasundstrom" title="GitHub" target="_blank" b-kujckncdpz><i class="fab fa-github" b-kujckncdpz></i></a></li>

                <li class="nav-item list-inline-item me-4 me-md-0" b-kujckncdpz><a class="nav-link menu-link me-0 py-2 text-decoration-none text-uppercase" href="https://www.youtube.com/@marna_li" target="_blank" b-kujckncdpz><i class="fab fa-youtube" b-kujckncdpz></i></a></li>

                <li class="nav-item list-inline-item me-4 me-md-0" b-kujckncdpz><a class="nav-link menu-link me-0 py-2 text-decoration-none text-uppercase" href="https://twitter.com/marna_li" title="X" target="_blank" b-kujckncdpz><i class="fab fa-x-twitter" b-kujckncdpz></i></a></li>

                <li class="nav-item list-inline-ite me-4 me-md-0" b-kujckncdpz><a class="nav-link menu-link me-0 py-2 text-decoration-none text-uppercase" href="https://www.linkedin.com/in/marinasundstrom" title="LinkedIn" target="_blank" b-kujckncdpz><i class="fab fa-linkedin" b-kujckncdpz></i></a></li></ul></div></nav></header>

<main class="bg-body pb-5" b-1vlcskuc8v><div class="container" b-1vlcskuc8v><article class="post outer"><div class="inner container"><header b-76by154q0w><div class="mb-4" b-76by154q0w><h1 class="post-title mb-2" b-76by154q0w>What is new in C# 12</h1><div class="d-flex justify-content-between mb-4" b-76by154q0w><span b-76by154q0w><small class="mb-2 text-muted" b-76by154q0w><time datetime="2023-11-13" b-76by154q0w>13 Nov 2023</time> • 
                        4 minutes read

</small><small class="text-muted" b-76by154q0w> • </small><a class="badge rounded-pill tag me-1 mb-1 text-decoration-none" href="/articles/tags/C%23" b-76by154q0w>C#</a><a class="badge rounded-pill tag me-1 mb-1 text-decoration-none" href="/articles/tags/.NET" b-76by154q0w>.NET</a><a class="badge rounded-pill tag me-1 mb-1 text-decoration-none" href="/articles/tags/Programming%20languages" b-76by154q0w>Programming languages</a></span><div b-76by154q0w><h4 class="badge bg-secondary comment-badge m-0"><span class="disqus-comment-count" data-disqus-url="http://127.0.0.1:5050/articles/what-is-new-in-csharp-12">#</span></h4></div></div></div></header></div>

            <div class="inner container"><p>With the advent of .NET 8 (on November 14, 2023), and .NET Conf soon to take place, let's us see what the next version of C# (12) will bring to developers.</p>
<p>C# 12 is a fairly minor update to the programming language. And I have picked out the features that I think are worth mentioning.</p>
<p>One of the features have been previewed many years ago, and been long-awaited.</p>
<p>A full list of all new language features can be found <a href="https://learn.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-12">here</a>.</p>
<h2 id="contents">Contents</h2>
<ol>
<li><a href="/articles/what-is-new-in-csharp-12#primary-constructors">Primary constructors</a></li>
<li><a href="/articles/what-is-new-in-csharp-12#collection-expressions">Collection expressions</a></li>
<li><a href="/articles/what-is-new-in-csharp-12#alias-any-type">Alias any type</a></li>
<li><a href="/articles/what-is-new-in-csharp-12#default-parameters-for-lambdas">Default parameters for lambdas</a></li>
</ol>
<h2 id="primary-constructors">Primary constructors</h2>
<p>This was a feature that was previewed many years ago - before Roslyn (Compiler-as-a-service). I adopted it in my code, then the design team decided not to proceed with it at that time. So I had to revert back.</p>
<p>So let's start from the basics.</p>
<p>You are used to write you instance class constructors like so:</p>
<pre><code class="language-csharp">public class Foo 
{
    public Foo(int value) 
    {
        Value = value;
    }

    public int Value { get; }
}
</code></pre>
<p>Most constructors are usually fairly simple. You assign fields or properties from the constructor parameters. Why should you have to you have to add a couple of lines and some vertical space for this?</p>
<p>Well, in C# 12, you can do this:</p>
<pre><code class="language-csharp">public class Foo(int value) 
{
    public Value =&gt; value;
}
</code></pre>
<p>As the example shows, that means that we can capture constructor parameters inside the members in our class - like in methods and properties. But if you want to be on the safe-side you should assign the values to readonly fields.</p>
<pre><code class="language-csharp">public class Foo(int value) 
{
    readonly int value = value;

    public Value =&gt; value;
}
</code></pre>
<p>When it comes to having multiple constructors besides the primary constructor. All the other constructors will have to call back to the primary constructor. That is so to initialize the parameters of the primary constructor, which are exposed to the class members by default.</p>
<pre><code class="language-csharp">public class Person(string name, int age) 
{
    readonly string favoritePet;

    public Person(string name, int age, string favoritePet) : base(name, age) 
    {
        this.favoritePet = favoritePet;
    }

    public Name =&gt; age;

    public Age =&gt; age;
}
</code></pre>
<p>But why did this feature take so long to implement?</p>
<p>Simply because of priority, and that the rules as well as the way to implement it was unclear. The designers probably wanted to solve pattern matching and other stuff leading up to record types before this.</p>
<h3 id="difference-from-record-types">Difference from Record types</h3>
<p>Although the syntax is similar, a significant difference between record types and classes with primary constructors is that the constructor parameters of record types are properties, while for classes they are not. For the latter, you have to declare and assign the properties yourself, as shown below:</p>
<pre><code class="language-csharp">record FooRecord(string Name);

class FooClass(string name) 
{

}

var rcrd = new FooRecord("Foo bar");
var name = rcrd.Name

var cls = new FooClass("Foo bar");
// No "name" property
</code></pre>
<p>The criticism towards this feature would be that it is confusing developers because the syntax is so similar but the behavior so different. We just have to learn and get used to the difference.</p>
<p>For classes with primary constructors you will have to define and assign to properties manually:</p>
<pre><code class="language-csharp">class FooClass(string name) 
{
    public string Name { get; } = name;
}

var cls = new FooClass("Foo bar");
var name = cls.Name
</code></pre>
<h2 id="collection-expressions">Collection expressions</h2>
<p>In C#, there are so many ways to initialize collections:</p>
<pre><code class="language-csharp">int[] arr1 = new int [] { 1, 2, 3 };

int[] arr2 = new [] { 1, 2, 3 };

var arr3 = new int [] { 1, 2, 3 };

var list1 = new List&lt;int&gt; { 1, 2, 3 };

List&lt;int&gt; list2 = new () { 1, 2, 3 };
</code></pre>
<p>In C# 12, you can instead use the brand new collection expression:</p>
<pre><code class="language-csharp">List&lt;int&gt; arr = [ 1, 2, 3 ];
</code></pre>
<p>This new syntax will hopefully make code clearer, as well as provide some symmetry with list patterns that were introduced in C# 11.</p>
<pre><code class="language-csharp">List&lt;int&gt; numbers = [ 1, 2, 3 ];

if (numbers is [var first, _, _])
{
    Console.WriteLine($"The first element of a three-item list is {first}.");
}
</code></pre>
<p>So how do collection expressions work?</p>
<p>In simple terms, the target collection take the type of the target. If it is an <code>int[]</code> then the expression is expected to be of either number literals or variables compatible with <code>int</code>. The rule is the least common type.</p>
<p>Collection expressions work for <code>List&lt;T&gt;</code>, <code>Span&lt;T&gt;</code>, and <code>ReadOnlySpan&lt;T&gt;</code>. Even inline arrays are supported.</p>
<pre><code class="language-csharp">List&lt;string&gt; superHeroes = [ "Tony Stark", "Steve Rogers" ];

Span&lt;double&gt; importantNumbers = [ 42, 3.14 ];

ReadOnlySpan&lt;Foo&gt; objs = [ new Foo("Foo"), new Foo("Bar") ];
</code></pre>
<p>The feature supports any type with a collection initializer, or when the target type is providing a collection builder - via <code>CollectionBuilderAttribute</code>.</p>
<p>There is also a code analyzer that suggest to you that you use collection expressions instead of the "old" initializers wherever applicable.</p>
<h3 id="spreading">Spreading</h3>
<p>Of course, you can spread one or more collections in a collection expressions:</p>
<pre><code class="language-csharp">string[] vowels = ["a", "e", "i", "o", "u"];
string[] consonants = ["b", "c", "d", "f", "g", "h", "j", "k", "l", "m",
                       "n", "p", "q", "r", "s", "t", "v", "w", "x", "z"];
string[] alphabet = [.. vowels, .. consonants, "y"];
</code></pre>
<h3 id="alias-any-type">Alias any type</h3>
<p>Previously you hav been able to create aliases for simple type names and generic types.</p>
<pre><code class="language-csharp">using Weight = double;
using IntList = System.Collections.Generic.List&lt;int&gt;;
</code></pre>
<p>Now you can alias any type, including tuples, arrays, pointer types, and other unsafe types.</p>
<pre><code class="language-csharp">using Point = (double X, double Y);
using Matrix = double[,];

Point point = new Point(3, 1);

Matrix matrix = new double[,];
matrix[1, 4] = 2.5;
</code></pre>
<p>I personally don't think that I will use this feature that much, but it is nice to have if I will ever need it.</p>
<h3 id="default-parameters-for-lambdas">Default parameters for lambdas</h3>
<p>Something that you haven't been able to do, but now can, is defining default parameters (aka optional parameters) for lambda expressions and delegates.</p>
<pre><code class="language-csharp">var adder =&gt; (int a, int b = 1) =&gt; a + b;

Console.WriteLine(adder(2, 3)); //5
Console.WriteLine(adder(1)); // 2
</code></pre>
<p>This is partly possible because, in C# 10, they added support for type inference with lambda expressions and <code>var</code>. Meaning that a "anonymous" delegate type will be generated with the matching method signature of the lambda. That one will have the default argument.</p>
<p>This is a another feature that is nice to have, but I don't use default parameters that often.</p>
<p><strong>Note:</strong> Type inference for lambdas is used for Minimal API endpoints in ASP.NET Core, when assigning lambdas to type <code>Delegate</code> for route handlers.</p>
<pre><code class="language-csharp">var builder = WebApplication.CreateBuilder(args);

var app = builder.Build();

// MapPost(string path, Delegate handler)

app.MapPost("/greet", (string name) =&gt; $"Hello, {name}!");

app.Run();
</code></pre>
<div style="margin-top: 42px;"><div id="disqus_thread"></div></div></div></article></div></main>

<footer class="footer py-4 bg-body-tertiary"><div class="container py-4 py-md-5 px-4 px-md-3 text-body-secondary"><div class="row"><div class="col-lg-3 mb-3"><h4>Marina Sundström</h4>
                <ul class="list-unstyled small text-muted"><li class="mb-2">
                        A personal website and blog about life and software development
                    </li>
                    <li class="mb-2">
                        Code is provided with no warranty.
                    </li></ul></div>
            <div class="col-6 col-lg-2 offset-lg-1 mb-3"><h5>This site</h5>
                <ul class="list-unstyled menu"><li class="mb-2"><a href="/about-me">About me</a></li>
                    <li class="mb-2"><a href="/articles">Articles</a></li>
                    <li class="mb-2"><a href="/resume">Resume</a></li>
                    <li class="mb-2"><a href="/portfolio">Portfolio</a></li></ul></div>
            <div class="col-6 mb-3"><h5>Social</h5>
                <ul class="list-unstyled"><li class="nav-item list-inline-item"><a class="nav-link menu-link me-0 py-2 text-decoration-none text-uppercase" href="https://github.com/marinasundstrom" title="GitHub" target="_blank"><i class="fab fa-2x fa-github"></i></a></li>

                    <li class="nav-item list-inline-item"><a class="nav-link menu-link me-0 py-2 text-decoration-none text-uppercase" href="https://www.youtube.com/@marna_li" target="_blank"><i class="fab fa-2x fa-youtube"></i></a></li>

                    <li class="nav-item list-inline-item"><a class="nav-link menu-link me-0 py-2 text-decoration-none text-uppercase" href="https://twitter.com/marna_li" title="X" target="_blank"><i class="fab fa-2x fa-x-twitter"></i></a></li>

                    <li class="nav-item list-inline-item"><a class="nav-link menu-link me-0 py-2 text-decoration-none text-uppercase" href="https://www.linkedin.com/in/marinasundstrom" title="LinkedIn" target="_blank"><i class="fab fa-2x fa-linkedin"></i></a></li></ul></div></div>
        <div class="mt-4"><p class="float-end mb-1"><a id="scrollToTop" href="#" __internal_preventDefault_onclick>Back to top</a></p>
            <p class="muted small mb-1">© 2025 Marina Sundström &bullet; Built with .NET & Blazor - Hosted
                by GitHub Pages</p></div></div></footer>
        <blazor-focus-on-navigate selector="h1"></blazor-focus-on-navigate>



</div>
<!-- %%-PRERENDERING-END-%% -->
</div>

  <div id="blazor-error-ui">
    An unhandled error has occurred.
    <a href="" class="reload">Reload</a>
    <a class="dismiss">🗙</a>
  </div>

  <script src="js/bootstrap/bootstrap.bundle.min.js"></script>
  <script src="js/bootstrap/color-modes.js"></script>
  <script src="_framework/blazor.webassembly.js"></script>
  <script src="js/app.js"></script>
  <script src="_content/Blazor-Analytics/blazor-analytics.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>


</body></html>
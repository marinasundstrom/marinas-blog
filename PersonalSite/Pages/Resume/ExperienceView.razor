@using PersonalSite.Models
@using PersonalSite.Markdown

@{
    var experience = Model.experience;

    var now = ExperienceExtensions.GetNowDate();

    var startDate = experience.GetStartDate();
    DateTime? endDate = experience.GetEndDate();
}

@if(Model.isSub) 
{
    <p>
        @experience.EmploymentType

        @if(experience.Consultant) 
        {
            @if(experience.For is not null) 
            {
                <spa> with @experience.For</spa>
            }
        } 
    </p>
}
else 
{
    <p>
        <b>@experience.Company</b> • @experience.EmploymentType
        
        @if(experience.Consultant) 
        {
            @if(experience.For is not null) 
            {
                <spa> with @experience.For</spa>
            }
        }
    
    </p>
}

<p class="mt-4 text-muted">@startDate.Humanize(endDate) • @startDate.Humanize2(endDate)<br />@experience.Location</p>

    <div class="mb-4 pt-2">
        <MarkdownView Content="@experience.Description" />
    </div>

    @if(experience.Skills?.Any() ?? false)
    {
        <dl class="mt-4">
            <dt>Key skills</dt>
            <dd>
                @foreach (var skillName in experience.Skills)
                {
                    <div class="badge mini rounded-pill tag me-1 mb-1 text-decoration-none">
                        @skillName
                    </div>
                }
            </dd>
        </dl>
    }

@code {
    [Parameter]
    public bool ShowMore { get; set; }

    [Parameter]
    [EditorRequired]
    public Obj Model { get; set; }

    void ToggleShowMore() 
    {
        ShowMore = !ShowMore;

        StateHasChanged();
    }
}